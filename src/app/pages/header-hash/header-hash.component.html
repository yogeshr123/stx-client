<div class="app-title mb-3 p-3">
    <div>
        <h1>
            <i class="fa fa-hashtag"></i> File Header Hash
        </h1>
    </div>
</div>

<div class="row">
    <div class="col-md-12 p-0">
        <div class="tile col-12 mt-3">
            <div *ngIf="uniqueTables?.length">
                Table Name:
                <p-dropdown class="ml-2 col-4" [options]="uniqueTables" [(ngModel)]="selectedTableName" optionLabel="TABLE_NAME" [filter]="true" filterBy="value.TABLE_NAME"></p-dropdown>

                <button class="btn btn-primary float-right">Add New</button>
            </div>
            <div class="table-responsive mt-3">
                <p-table #dt2 [responsive]="true" [value]="headers" [tableStyle]="{'table-layout':'auto'}" [columns]="selectedColumns" [reorderableColumns]="true">
                    <ng-template pTemplate="caption">
                        <div style="text-align: left">
                            <p-multiSelect [options]="columnTableColumns" [(ngModel)]="selectedColumns" optionLabel="field" selectedItemsLabel="{0} columns selected" [style]="{minWidth: '200px'}" defaultLabel="Choose Columns" (onChange)="saveColumnState()"></p-multiSelect>
                        </div>
                        <div class="globalSearch">
                            <input type="text" placeholder="Global Search" [(ngModel)]="globalQuery">
                            <button class="btn btn-primary" type="button" (click)="search()">
                    <i class="fa fa-lg fa-fw fa-search"></i>
                  </button>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                {{col.header}}
                                <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order">
                                </p-sortIcon>
                            </th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <th *ngFor="let col of columns" [ngSwitch]="col.field" class="ui-flclassuid">
                                <span *ngSwitchCase="'START_DATE'"></span>
                                <span *ngSwitchCase="'UPDATE_DATE'"></span>
                                <input #statusFilter id="statusFilter" pInputText *ngSwitchCase="'STATUS'" type="text" (input)="dt2.filter($event.target.value, col.field, col.filterMatchMode)" [value]="dt2.filters[col.field]?.value" [(ngModel)]="statusDefaultFilter">
                                <input pInputText *ngSwitchDefault type="text" (input)="dt2.filter($event.target.value, col.field, col.filterMatchMode)" [value]="dt2.filters[col.field]?.value">
                            </th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-version let-columns="columns">
                        <tr [pSelectableRow]="version">
                            <td *ngFor="let col of columns">
                                <span> {{version[col.field]}} </span>
                            </td>
                            <td style='white-space: nowrap' class="text-center">
                                <div>
                                    <button title="Approve" *ngIf="version.STATUS === 'NEW'" class="btn btn-success btn-sm">
                                        <i class="fa fa-thumbs-up"></i>
                                    </button>
                                    <button title="Edit" *ngIf="version.STATUS === 'NEW'" class="btn btn-primary btn-sm ml-1">
                                        <i class="fa fa-pencil"></i>
                                    </button>
                                    <button title="view" class="btn btn-info btn-sm ml-1">
                                        <i class="fa fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>